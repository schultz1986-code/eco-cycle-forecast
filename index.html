<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>经济事件时间预测</title>
<link rel="stylesheet" href="css/style.css">
</head>
<body>
<div class="wrap">
<div class="row">
<div class="row" style="gap:8px">
<button id="tabPredict">预测</button>
<button id="tabEvents">事件评估</button>
<span id="tabInfo" class="muted"></span>
</div>
<div style="margin-left:auto;display:flex;align-items:center;gap:8px">
<label for="theme" id="lblTheme">主题</label>
<select id="theme">
<option value="dark">深色</option>
<option value="light" selected>浅色</option>
</select>
<label for="lang" id="lblLang">语言</label>
<select id="lang">
<option value="zh">中文</option>
<option value="en">English</option>
<option value="fr">Français</option>
<option value="de">Deutsch</option>
</select>
</div>
</div>
<div class="card" id="viewPredict">
<div class="title">下一次经济事件预测</div>
<div class="row">
<div style="display:flex;align-items:center;gap:12px;margin-bottom:8px;padding:8px;background:#f8fafc;border-radius:6px;width:100%">
  <span style="font-weight:bold;font-size:13px;color:#475569">数据源：</span>
  <label style="display:inline-flex;align-items:center;gap:4px;cursor:pointer;font-size:13px"><input type="checkbox" id="checkCycle" checked> <span>周期模型</span></label>
  <label style="display:inline-flex;align-items:center;gap:4px;cursor:pointer;font-size:13px"><input type="checkbox" id="checkStock" checked> <span>股市大盘</span></label>
  <label style="display:inline-flex;align-items:center;gap:4px;cursor:pointer;font-size:13px"><input type="checkbox" id="checkGold" checked> <span>黄金</span></label>
  <label style="display:inline-flex;align-items:center;gap:4px;cursor:pointer;font-size:13px"><input type="checkbox" id="checkOil" checked> <span>原油</span></label>
</div>
</div>
<div class="row">
<button id="train">训练模型</button>
<label style="display:inline-flex;align-items:center;gap:4px;cursor:pointer;margin-left:8px"><input type="checkbox" id="fitMarket"> <span id="lblFitMarket">拟合市场趋势</span></label>
<label for="grid" style="margin-left:8px" id="lblGrid">网格</label>
<input type="checkbox" id="grid" checked />
<button id="queryBtn">?</button>
    <div id="regionControls" style="display:flex;flex-direction:column;gap:4px;margin-left:8px">
      <div style="display:flex;align-items:center;gap:8px;flex-wrap:wrap">
        <span id="lblRegion" style="font-weight:bold;margin-right:4px;font-size:12px;opacity:0.7">地区</span>
        <label style="display:inline-flex;align-items:center;gap:4px;cursor:pointer"><input type="checkbox" value="global" checked> <span style="border-bottom:3px solid #60a5fa;padding-bottom:1px" class="lbl-global">全球</span></label>
        <label style="display:inline-flex;align-items:center;gap:4px;cursor:pointer"><input type="checkbox" value="us"> <span style="border-bottom:3px solid #f87171;padding-bottom:1px" class="lbl-us">美国</span></label>
        <label style="display:inline-flex;align-items:center;gap:4px;cursor:pointer"><input type="checkbox" value="europe"> <span style="border-bottom:3px solid #fbbf24;padding-bottom:1px" class="lbl-europe">欧洲</span></label>
        <label style="display:inline-flex;align-items:center;gap:4px;cursor:pointer"><input type="checkbox" value="asia"> <span style="border-bottom:3px solid #34d399;padding-bottom:1px" class="lbl-asia">亚洲</span></label>
        <label style="display:inline-flex;align-items:center;gap:4px;cursor:pointer"><input type="checkbox" value="emerging"> <span style="border-bottom:3px solid #a78bfa;padding-bottom:1px" class="lbl-emerging">新兴</span></label>
      </div>
      <div style="display:flex;align-items:center;gap:8px;flex-wrap:wrap">
        <span id="lblDomain" style="font-weight:bold;margin-right:4px;font-size:12px;opacity:0.7">领域</span>
        <label style="display:inline-flex;align-items:center;gap:4px;cursor:pointer"><input type="checkbox" value="geo"> <span style="border-bottom:3px solid #fb923c;padding-bottom:1px" class="lbl-geo">地缘</span></label>
        <label style="display:inline-flex;align-items:center;gap:4px;cursor:pointer"><input type="checkbox" value="financial"> <span style="border-bottom:3px solid #4ade80;padding-bottom:1px" class="lbl-financial">金融</span></label>
        <label style="display:inline-flex;align-items:center;gap:4px;cursor:pointer"><input type="checkbox" value="tech"> <span style="border-bottom:3px solid #22d3ee;padding-bottom:1px" class="lbl-tech">科技</span></label>
        <label style="display:inline-flex;align-items:center;gap:4px;cursor:pointer"><input type="checkbox" value="energy"> <span style="border-bottom:3px solid #f472b6;padding-bottom:1px" class="lbl-energy">能源</span></label>
        <label style="display:inline-flex;align-items:center;gap:4px;cursor:pointer"><input type="checkbox" value="policy"> <span style="border-bottom:3px solid #94a3b8;padding-bottom:1px" class="lbl-policy">政策</span></label>
        <label style="display:inline-flex;align-items:center;gap:4px;cursor:pointer"><input type="checkbox" value="macro"> <span style="border-bottom:3px solid #818cf8;padding-bottom:1px" class="lbl-macro">宏观</span></label>
      </div>
    </div>
<button id="saveModel">保存模型</button>
<button id="loadModel">导入模型</button>
<button id="exportModel">导出模型</button>
<button id="resetModel">重置</button>
<input type="file" id="loadModelFile" accept="application/json" style="display:none" />
<span id="status" class="muted"></span>
<span id="appState" class="muted" style="color:#f59e0b;margin-left:8px"></span>
<span id="fitness" class="muted"></span>
<progress id="trainProgress" max="100" value="0" style="height:10px;width:180px;margin-left:8px"></progress>
<span id="trainCount" class="mono muted" style="margin-left:6px"></span>
</div>
<div>
<div style="margin-bottom:10px">
<div><span id="lblNextCrash">下一次全球危机：</span><span class="mono" id="nextCrash">-</span></div>
<div><span id="lblNextBoom">下一次机遇（高点）时间：</span><span class="mono" id="nextBoom">-</span></div>
<div><span id="lblAdvice">建议：</span><div id="advice" class="muted"></div></div>
</div>
<div class="chartWrap" style="position:relative">
<canvas id="chart" width="900" height="420"></canvas>
<div id="tooltip" class="tooltip"></div>
</div>
<div id="marketChartsArea" style="display:flex;flex-direction:column;gap:10px;margin-top:20px;">
  <!-- Stock Market Chart -->
  <div class="market-chart-container" style="position:relative;">
    <div style="font-size:12px;font-weight:bold;margin-bottom:4px;color:#475569;display:flex;align-items:center;gap:8px">
      <span>股市大盘 (Stock Market)</span>
      <select id="stockIndexSel" style="font-size:11px;padding:2px">
        <option value="sp500">S&P 500 (US)</option>
        <option value="shanghai">上证指数 (CN)</option>
      </select>
    </div>
    <canvas id="chartStock" width="900" height="150" style="border:1px solid #e2e8f0;border-radius:4px;background:rgba(255,255,255,0.5)"></canvas>
  </div>
  <!-- Gold Chart -->
  <div class="market-chart-container" style="position:relative;">
    <div style="font-size:12px;font-weight:bold;margin-bottom:4px;color:#475569">黄金 (Gold)</div>
    <canvas id="chartGold" width="900" height="150" style="border:1px solid #e2e8f0;border-radius:4px;background:rgba(255,255,255,0.5)"></canvas>
  </div>
  <!-- Oil Chart -->
  <div class="market-chart-container" style="position:relative;">
    <div style="font-size:12px;font-weight:bold;margin-bottom:4px;color:#475569">原油 (Crude Oil)</div>
    <canvas id="chartOil" width="900" height="150" style="border:1px solid #e2e8f0;border-radius:4px;background:rgba(255,255,255,0.5)"></canvas>
  </div>
</div>
</div>
<div class="card" id="eventInfoPanel" style="display:none">
<div class="title" id="eventInfoTitle">事件详情</div>
<div id="eventInfo" class="muted"></div>
</div>
<div class="card" id="helpPanel">
<div class="title" id="helpTitle">帮助</div>
<div id="helpText" class="muted"></div>
</div>
<div class="card" id="queryPanel" style="display:none">
<div class="title" id="queryTitle">查询说明</div>
<div id="queryContent" class="muted"></div>
</div>
</div>
<div class="card" id="viewEvents" style="display:none">
<div class="title">历史事件评估</div>
<div class="row">
<button id="eval">生成评估</button>
<span id="evalInfo" class="muted"></span>
</div>
<div style="overflow:auto">
<table style="width:100%;border-collapse:collapse">
<thead>
<tr style="text-align:left">
<th id="thName" style="padding:6px;border-bottom:1px solid #374151">名称</th>
<th id="thRegion" style="padding:6px;border-bottom:1px solid #374151">地区</th>
<th id="thDomain" style="padding:6px;border-bottom:1px solid #374151">领域</th>
<th id="thTrend" style="padding:6px;border-bottom:1px solid #374151">趋势</th>
<th id="thDate" style="padding:6px;border-bottom:1px solid #374151">时间</th>
<th id="thImpact" style="padding:6px;border-bottom:1px solid #374151">真实影响</th>
<th id="thModelTime" style="padding:6px;border-bottom:1px solid #374151">模型极值时间</th>
<th id="thDelta" style="padding:6px;border-bottom:1px solid #374151">时间差(月)</th>
<th id="thModelImpact" style="padding:6px;border-bottom:1px solid #374151">模型影响</th>
<th id="thImpactDiff" style="padding:6px;border-bottom:1px solid #374151">影响差</th>
<th id="thMarket" style="padding:6px;border-bottom:1px solid #374151">市场数据摘要</th>
</tr>
</thead>
<tbody id="eventsTable"></tbody>
</table>
</div>
</div>
</div>
<script src="js/market_data.js"></script>
  <script src="js/core.js"></script>
</body>
</html>
